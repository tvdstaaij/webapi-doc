{"name":"Webapi-doc","tagline":"Documentation on the Intellifi web API.","body":"Brain web API documentation\r\n===========================\r\n\r\nThis document contain the official Brain web API documentation. The Brain web API is a [RESTful API](https://en.wikipedia.org/wiki/Representational_state_transfer) that allows you to access all the data that we provide in a powerfull and simple way.\r\n\r\nBy default the api is accessible on: http://`brain_host`/api/`resource`/`id`\r\n* The `brain_host` will be provided to you when you are evaluating or purchasing our product. We always have an 'play-arround' brain that we can supply to you.\r\n* The `resource` shall contain the resource that you want to query. This is always the plural form of a noun. I.e. items, spots, events.\r\n* The **optional** `id` indicates which specific resource you wish to access. Please refer to the individual resources for more information on the type of id that is used. If you omit `id` the server will return a list with all items in the resource.\r\n\r\nThe default data format is JSON.\r\n\r\nAs with every web API you can only request new information by doing another request. We do offer a whole set of [pushing technologies](https://github.com/intellifi-nl/doc-push). They will allow you to be directly informed when something changes, instead of polling for the changes. Most use cases that we had until now can be implementated by using the web API only.\r\n\r\nContents\r\n--------\r\n* [Quick start](#quick-start)\r\n  * [Exploring](#exploring)\r\n  * [Postman](#postman)\r\n* [Terminology](#terminology)\r\n  * [Item](#item)\r\n  * [Zone](#zone)\r\n* [Resources](#resources)\r\n  * [Overview](#overview)\r\n  * [Id](#id)    \r\n  * [References](#references)  \r\n  * [Create and update](#create-and-update)\r\n* [Future](#future)\r\n\r\nQuick start\r\n===========\r\n\r\nExploring\r\n---------\r\n\r\nWe find it very important that our web API is self explaining. We strongly recommand you to install a JSON viewer plugin in your webbrowser. This will allow you to view (and navigate!) the query results in your web browser. For Google Chrome we advice you to use [JSONView](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc). Without doubt there will be a nice plugin for your own personal browser as well.\r\n\r\n![](https://raw.githubusercontent.com/intellifi-nl/doc-webapi/master/explore2.png)\r\n\r\nMost of the offered API resources include links to other relevant resources. These links are added as fields to the JSON objects. A good JSON viewer will allow you to follow them with a simple click.\r\n\r\nPostman\r\n-------\r\n\r\nGetting started with our API can be done quickly with [Postman](https://www.getpostman.com/). It's an easy tool that allows you to create PUT and POST requests from within Chrome. You can exactly see what's send and what's received. We prepared a set with example url's that allow you to experiment. You can use the import function of postman with this link to get the collection of url's: [https://www.getpostman.com/collections/0a807a8bcaa91900bf2a](https://www.getpostman.com/collections/0a807a8bcaa91900bf2a)\r\n\r\n![](https://raw.githubusercontent.com/intellifi-nl/doc-webapi/master/postman.png)\r\n\r\nPlease note that given example url's should be replaced by resources that actually exist. You can just copy and past them from your own brain.\r\n\r\nMore information and some examples for curl can be found [below](#create-and-update).\r\n\r\nTerminology\r\n===========\r\n\r\nThe whole Intellifi concept is based upon items and zones. Please take some time to familiarize yourself with these definitions. They will make it way easier to understand this API.\r\n\r\nItem\r\n----\r\n\r\nAn item is a small and lightweight electronic device that contains and remembers a unique code. An item must be able to transmit this unqiue code wireless. This item may be a passive RFID tag, but it can also be an iBeacon. Even your smartphone could behave itself as an item. A device is an item as long as it's able to remember and transmit it's unique code.\r\n\r\nAn item is an abstraction that allows us to work with RFID tags and iBeacon tags as if they where the same. Attributes are added to the items so that you can see the difference, if you wish.\r\n\r\nZone\r\n----\r\n\r\nA zone is an area in which items can be detected. This area is naturually limited to the range of the used RFID technology. Passive tags have a range of approximately 10 meters, active tags can easily have a range of 100+ meters. A zone must be able to reports it's detected items.\r\n\r\nA lot of devices are capable of behaving themselves as 'zones'. Our [Intellif Spot](http://intellifi.nl/home/products/) is a very good example of this. It can detect RFID tags and Bluetooth tags that are in the neighbourhoud. It reports these detections through it's network interface to a server. It's also possible to connect external antennas to the Spot. By default they are used to enlarge the reach of the overall Spot zone. You may configure individual external antenna to behave themselve as a zone as well. By doing so you are essentially creating a virtual spot. \r\n\r\nAnother great example of a zone could be your smartphone. Lot's of smartphones support the detection if iBeacons. It's a matter of the right app to report this information to a server. And voil√†: here's another zone that you can use to detect your items.\r\n\r\nSo you see that a zone is an abstraction, it can be 'implemented' by multiple devices. Therefore it's not avaialble as a seperate resource in our web API. You will see that most resources mention the word, it's a key concept in our solution.\r\n\r\nResources\r\n=========\r\n\r\nResources are the core of the web API. We tried to limit the number of resources to the core concepts. An elaborate description of each resource is available on [this page](resources.md).\r\n\r\nOverview\r\n--------\r\n\r\n| Name | Description | \r\n| ----- | ---- | ----------- |\r\n| [items](resources.md#items) | All detected items, now and in the past. |\r\n| [locations](resources.md#locations) | The locations that devices may report to. |\r\n| [spots](resources.md#spots) | Live information about your Intellifi Smart Spots. |\r\n| [presences](resources.md#presences) | All the presences in your system. |\r\n| [events](resources.md#events) | Access to all archived events that flowed through the brain. |\r\n\r\nId\r\n--\r\n\r\nThe first two fields of every resource are `url` and `id`. They both uniqly identify the resource. You may add the `id_only=true` condition to the query part of the url if you wish to hide the `url` field(s). This will also apply to resource references. The `url` fields are shown by default to increase explorability of the API. If you are creating an automated import then you probably want to add `id_only=true` to all your requests.\r\n\r\nReferences\r\n----------\r\n\r\nMost resources contain one or more fields that reference to another resource in the API. I.e. An item resource will be pointing to some location. These references can be shown in three ways. Depending on the arguments that you supply in the query part of your request url.\r\n\r\n1. By default it's shown as an url. This helps you in navigating to it, if you have the right browser extension then you can just click it. The '_url' is postfixed to the field name. I.e. location becomes location_url.\r\n![](https://raw.githubusercontent.com/intellifi-nl/doc-webapi/master/explore.png)\r\n\r\n2. If you add `id_only=true` in the query then only the id of the resource is shwon. The name of the field is postfixed with '_id'. I.e. location becomes location_id\r\n![](https://raw.githubusercontent.com/intellifi-nl/doc-webapi/master/explore_idonly.png)\r\n\r\n3. If you add `populate=fieldname,fieldname2,etc` in the query string then the brain will try to add the documents as an extra level in the results. The name of the field is not appended with a postfix in this case. If the lookup fails then `null` is returned as value.\r\n![](https://raw.githubusercontent.com/intellifi-nl/doc-webapi/master/explore_populate.png)\r\n\r\nCreate and update\r\n-----------------\r\n\r\nYou can create and change most avaialble resources in the API. This can be done by sending an HTTP POST (for creating) or PUT (for updating). Your programming language will most likely have several options to achieve this. In this example we will use the wel known unix tool curl (also avaialble for windows).  Many other tools are avaialble.\r\n\r\nWe will first create a new location by running post:\r\n```\r\ncurl -XPOST -H \"Content-Type: application/json\" --data @postBody.json http://`host`/api/locations\r\n```\r\n\r\nThe body will be filled with the contents of the `postBody.json` file:\r\n```\r\n{\r\n  \"key\":\"value\",\r\n  \"label\":\"My first! Yeah\"\r\n}\r\n```\r\n\r\nPlease note that you may add multiple key/value pairs in the object. Unknown values will be ignored.\r\n\r\nThe reply to this POST will be another JSON object that contains information about the executed request. The most imporant is the url and the id of the newly created resource:\r\n```\r\n{\r\n  \"updated_properties_count\":2,\r\n  \"url\":\"http://localhost:3000/api/locations/550052669dba59d03057cb74\",\r\n  \"id\":\"550052669dba59d03057cb74\",\r\n}\r\n```\r\n\r\nMore fields may be added in the future without further notice.\r\n\r\nWe now want to change the value of the label to a more sensible value. Please note that you will have to add the id of the resource to your uri.\r\n```\r\ncurl -XPUT -H \"Content-Type: application/json\" --data @putBody.json localhost:3000/api/locations/550052669dba59d03057cb74\r\n```\r\n\r\nThe contents of the file `putBody.json`:\r\n```\r\n{\r\n  \"label\":\"Kitchen\"\r\n}\r\n```\r\n\r\nThis will result in a reply similar to the POST command. Now the label is changed to Kitchen.\r\n\r\nTODO\r\n----\r\n* Explain time format and link to iso (UTC only).\r\n* Explain default CORS setting.\r\n* Explain item sets\r\n* Explain more on postman, environment.\r\n\r\nFuture\r\n------\r\n\r\nA lot of things are going to happen in the future, some things need to be developed. And other things only need to be documented. Please let us know if you are really waiting on something.\r\n* Authentication\r\n* Versioning\r\n* SSL\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}